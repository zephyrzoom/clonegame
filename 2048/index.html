<!DOCTYPE html>
<html>

<head>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.11.0/dist/phaser.min.js"></script>
</head>

<body>

    <script>
        var config = {
            type: Phaser.AUTO,
            width: 800,
            height: 600,
            backgroundColor: 0xfaf8ef,

            physics: {
                default: 'arcade',
                arcade: {
                    gravity: {
                        y: 300
                    },
                    debug: false
                }
            },
            scene: {
                preload: preload,
                create: create,
                update: update
            },
        };

        var game = new Phaser.Game(config);

        function preload() {
            
            background = this.add.graphics();
            background.fillStyle(0xbbada0, 1.0);

            grid = this.add.graphics();
            grid.fillStyle(0xeee4da, 0.35);

            block2 = this.add.graphics();
            block2.fillStyle(0xeee4da, 1.0);

            cursors = this.input.keyboard.createCursorKeys();
        }

        function create() {
            
            background_width = 500;
            background_height = background_width;
            
            background.fillRoundedRect(0, 0, background_width, background_height, 6);
            grid_width = 15;
            block_width = (background_width - 5 * grid_width) / 4;
            block_heigth = (background_height - 5 * grid_width) / 4;

            for (let i = 0; i < 4; i++) {
                for (let j = 0; j < 4; j++) {
                    grid.fillRoundedRect(grid_width + j * (block_width + grid_width),
                        grid_width + i * (block_heigth + grid_width),
                        block_width,
                        block_heigth,
                        3);
                }
            }
            
            block2.fillRoundedRect(15, 15, 107, 107, 3);
            block2.generateTexture('block2_texture');
            block2_sprite = this.physics.add.sprite(200, 200, 'block2_texture');
            
        }

        function update() {
            
            if (cursors.left.isDown)
            {
                block2.clear()
                block2.fillRoundedRect(200,200,100,100,3);
                block2_sprite.setVelocityX(-100);
            }
            else if (cursors.right.isDown)
            {
                block2_sprite.setVelocityX(100);
            }
            else if (cursors.up.isDown)
            {
                block2_sprite.setVelocityY(-100);
            }
            else if (cursors.down.isDown)
            {
                block2_sprite.setVelocityY(100);
            }
        }
    </script>

</body>

</html>